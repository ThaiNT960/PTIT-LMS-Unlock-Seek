(()=>{var e,t;function n(){"use strict";const e=["_0x1","_0x2","_0x3","_0x4"],t=t=>e[t];t(0),t(1),((e=2e3)=>{const t=performance.now();return new Promise(n=>{const o=()=>{const o=(()=>{const e=document.querySelector('meta[name="ptit-extension-enabled"]');return e?{state:e.content}:{state:"absent"}})();return"true"===o.state?n(1):"false"===o.state?n(0):"loading"===o.state||"absent"===o.state?performance.now()-t>e?n(0):0:n(0)};if(0==o()){const e=new MutationObserver(()=>{0!=o()&&e.disconnect()});e.observe(document.documentElement,{childList:1,subtree:1,attributes:1})}})})(2e3).then(e=>{e&&function(){if(window.__ptit_patched__)return;window.__ptit_patched__=1,console.log("%cPTIT LMS: Unlock Seek (đang bật).","color:#16a34a;font-weight:700"),(()=>{let e="";for(let t=0;5>t;t++)e+=String.fromCharCode("dummy".charCodeAt(t)+1)})();let e=0;function t(){try{if(!(window.YT&&YT.Player&&YT.Player.prototype))return 0;const e=YT.Player.prototype;return e.__ptit_seek_block__||(e.seekTo=()=>{},e.__ptit_seek_block__=1),1}catch(e){return 0}}if(function(){if(e)return;const t=(()=>{}).bind;Function.prototype.bind=function(n,...o){try{if(!e&&n&&"string"==typeof this.name&&this.name.includes("_onPlayerStateChange")){"function"==typeof n._checkCurrentTime&&(n._checkCurrentTime=()=>1);const o=Object.getPrototypeOf(n);o&&"function"==typeof o._checkCurrentTime&&(o._checkCurrentTime=()=>1),e=1,Function.prototype.bind=t}}catch(e){}return t.apply(this,[n,...o])}}(),!t()){const e=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=()=>{try{t()}catch(e){}"function"==typeof e&&e()}}let n=0;const o=setInterval(()=>{n++,(t()||n>40)&&clearInterval(o)},250)}()})}e=["log","warn","error","info","debug"],t=496,(t=>{for(;--t;)e.push(e.shift())})(++t),(()=>{let e=498645;e-=74565})(),Math.random(),Date.now();const o="undefined"==typeof window,r=!o&&"undefined"!=typeof location&&"chrome-extension:"===location.protocol,a=!o&&"undefined"!=typeof chrome&&chrome.runtime&&"string"==typeof chrome.runtime.id,c=!o&&!r&&a;if(o){(e=>{let t="";for(const n in e)t+=e[n].split("").reverse().join("")})({key1:"valueA",key2:"valueB",key3:"valueC"});const u="YTdmM2M5ZDRlMWI4ZjZjMmE5ZDBlM2I0YzZmMWEyYjM=";function i(e){try{return atob(e)}catch(e){return""}}const l=i("aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL1RoYWlOVDk2MC9MaXNlbmNlLWtleS9tYWluL2NvbnRyb2wva2V5X2ZpbGUudHh0"),m=i(u);async function s(){try{const e=await fetch(`${l}?cb=${Date.now()}`,{cache:"no-store"});if(!e.ok)throw new Error(`HTTP ${e.status}`);const t=(await e.text()).trim()===m;await chrome.storage.sync.set({githubKeyValid:t})}catch(e){await chrome.storage.sync.set({githubKeyValid:0})}}return chrome.runtime.onInstalled.addListener(()=>{chrome.storage.sync.get("extensionEnabled",e=>{void 0===e.extensionEnabled&&chrome.storage.sync.set({extensionEnabled:1})}),s(),chrome.alarms.create("ptit_checkKey",{periodInMinutes:1})}),chrome.runtime.onStartup.addListener(s),chrome.alarms.onAlarm.addListener(e=>{"ptit_checkKey"===e.name&&s()}),void chrome.runtime.onMessage.addListener((e,t,o)=>{if(e&&"PTIT_INJECT_MAIN"===e.type){try{const e=t?.tab?.id,r=t?.frameId;if("number"!=typeof e)return void o?.({ok:0,reason:"No tabId"});chrome.scripting.executeScript({target:{tabId:e,frameIds:"number"==typeof r?[r]:void 0},world:"MAIN",func:n},()=>{chrome.runtime.lastError?o?.({ok:0,reason:chrome.runtime.lastError.message}):o?.({ok:1})})}catch(e){o?.({ok:0,reason:String(e)})}return 1}})}if(r){(()=>{let e=15;e*=2,e-=10})(),(e=>{for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}})([1,2,3,4,5]),(()=>{if(!document.getElementById("status"))try{const e=document.createElement("div");e.className="status",e.id="status",e.textContent="Trạng thái lưu: ";const t=document.createElement("b");if(t.textContent="—",e.appendChild(t),document.body){const t=document.querySelector(".author");t&&t.parentNode?t.parentNode.insertBefore(e,t):document.body.appendChild(e)}else document.addEventListener("DOMContentLoaded",()=>{const t=document.querySelector(".author");t&&t.parentNode?t.parentNode.insertBefore(e,t):document.body.appendChild(e)})}catch(e){}})(),window.updatePTITStatus=e=>{try{const t=document.getElementById("status");if(!t)return;const n=t.querySelector("b");n&&(n.textContent=String(e))}catch(e){}},document.addEventListener("ptit:status",e=>{try{window.updatePTITStatus(e.detail)}catch(e){}});const h=document.getElementById("toggleSwitch"),y=document.getElementById("status");if(!h)return;function d({extensionEnabled:e,githubKeyValid:t}){const n=!!e;h.checked=n,y&&(y.innerHTML="Trạng thái lưu: <b>"+(n?"Bật":"Tắt")+"</b>"),0==t?(()=>{let e=document.getElementById("keyWarn");if(!e){e=document.createElement("div"),e.id="keyWarn",e.style.cssText="margin-top:10px;font-size:12px;color:#b91c1c;background:#fee2e2;border:1px solid #fecaca;padding:8px;border-radius:8px";const t="Q8aw4buhbmcgY2jhur8gdOG6r3Qga2jhuqluIGPhuqVwIHThu6sgeGEgxJHGsOG7o2Mga8OtY2ggaG/huqF0LkV4dGVuc2lvbiB04bqhbSBk4burbmcgaG/huqF0IMSR4buZbmcu";e.textContent=(e=>{try{return atob(e)}catch(e){return""}})(t),document.body.appendChild(e)}e.style.display="block"})():(()=>{const e=document.getElementById("keyWarn");e&&(e.style.display="none")})()}chrome.storage.sync.get({extensionEnabled:1,githubKeyValid:1},d),h.addEventListener("change",()=>{chrome.storage.sync.set({extensionEnabled:h.checked})}),chrome.storage.onChanged.addListener((e,t)=>{"sync"===t&&chrome.storage.sync.get({extensionEnabled:1,githubKeyValid:1},d)})}else if(c){(()=>{let e="randomstring".split("").reverse().join(""),t="";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e.charCodeAt(n)+1)})(),(()=>{let e=0;for(let t=0;15>t;t++)t%2==0?e+=t:e-=t})(),(()=>{const e=document.createElement("meta");e.name="ptit-extension-enabled",e.content="loading",(document.documentElement||document.head).appendChild(e);try{chrome.storage.sync.get({extensionEnabled:1,githubKeyValid:1},t=>{(t=>{try{const n=0!=t.extensionEnabled,o=0!=t.githubKeyValid,r=n&&o;e.content=r?"true":"false"}catch(e){}})(t)})}catch(t){try{e.content="false"}catch(e){}}})();try{chrome.runtime.sendMessage({type:"PTIT_INJECT_MAIN"})}catch(f){}const p=["alpha","beta","gamma","delta"];(e=>{let t=e.toUpperCase(),n="";for(let e=0;e<t.length;e++)n+=String.fromCharCode(t.charCodeAt(e)+2)})([p[0],p[1]][0])}})();